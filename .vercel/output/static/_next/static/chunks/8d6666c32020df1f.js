(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77876,e=>{"use strict";var a=e.i(44816),t=e.i(54939),r=e.i(59544),s=e.i(21038),l=e.i(4311);let d=(0,l.default)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),i=(0,l.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]);function c(){let[e,l]=(0,t.useState)(null),[c,n]=(0,t.useState)("chrome"),[o,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),[g,b]=(0,t.useState)(""),[y,u]=(0,t.useState)(!1),p=async a=>{if(!e)return void b("请选择一个文件");m(!0),b(""),h(null);let t=new FormData;t.append("file",e);try{let e=await fetch(`/api/import/${c}`,{method:"POST",body:t}),a=await e.json();a.success?h(a):b(a.message||"导入失败")}catch(e){b("导入过程中发生错误")}finally{m(!1)}},f=async e=>{u(!0);try{let a=await fetch(`/api/export?format=${e}`);if(!a.ok)throw Error("Export failed");let t=await a.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`bookmarks_export_${new Date().toISOString().slice(0,10)}.${e}`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s)}catch(e){alert("导出失败"),console.error(e)}finally{u(!1)}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"导入导出"}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"导出数据"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"将所有已保存的网站链接打包导出。支持 JSON 格式（用于备份/迁移）或 HTML 格式（通用书签文件）。"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(r.Button,{onClick:()=>f("json"),variant:"secondary",disabled:y,className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"导出 JSON"]}),(0,a.jsxs)(r.Button,{onClick:()=>f("html"),variant:"secondary",disabled:y,className:"flex items-center gap-2",children:[(0,a.jsx)(i,{className:"w-4 h-4"}),"导出 HTML (书签)"]})]})]})]}),(0,a.jsxs)("section",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"导入书签"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"导入来源"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>n("chrome"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"chrome"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-100":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:"Google Chrome (HTML)"}),(0,a.jsx)("button",{onClick:()=>n("safari"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"safari"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-100":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:"Safari (Plist)"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"选择文件"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)(s.Upload,{className:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400"}),(0,a.jsxs)("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"font-semibold",children:"点击上传"})," 或拖拽文件到此处"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"chrome"===c?"HTML 文件":"Plist 文件"})]}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"chrome"===c?".html":".plist",onChange:e=>{e.target.files&&e.target.files[0]&&l(e.target.files[0])}})]})}),e&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["已选择：",e.name]})]}),g&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-md text-sm",children:g}),x&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-md text-sm",children:[(0,a.jsx)("p",{className:"font-semibold",children:"导入成功！"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-2",children:[(0,a.jsxs)("li",{children:["导入链接数：",x.imported]}),(0,a.jsxs)("li",{children:["跳过重复项：",x.duplicates]}),(0,a.jsxs)("li",{children:["发现分类数：",x.categories.length]})]})]}),(0,a.jsx)(r.Button,{onClick:p,disabled:!e||o,isLoading:o,children:"开始导入"})]})]})}e.s(["default",()=>c],77876)}]);